{"version":3,"sources":["_util/utils.js"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","isNaN","isUndefined","get","rounding","src","precision","num","parseFloat","toString","result","Math","round","pow","rs","isEmpty","value","keys","isNotEmpty","getRowIdentity","row","rowKey","loadScript","Promise","resolve","reject","script","document","createElement","type","onload","onerror","head","appendChild","setStringFormat","str","replaces","replace","r","convertSearchFilter","params","_a","quickSearchProperties","pageInfo","page","rows","search","quickSearchValue","includes","quickValue","filtersKeys","filter","item","filters","map","itemArr","split","operator","fieldName","fieldType","sortOrdersKeys","sortOrders","property","direction","otherParams","key","getLocale","locales","formatParams","desc","isPhoto","url","toLowerCase","getString","compare","name","minor","o","a","b","Error"],"mappings":"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","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport isNaN from 'lodash/isNaN';\nimport isUndefined from 'lodash/isUndefined';\nimport get from 'lodash/get';\nexport function rounding(src, precision = 2) {\n    if (isUndefined(src) || src === null)\n        return;\n    const num = parseFloat(src.toString());\n    if (isNaN(num))\n        return;\n    const result = Math.round(num * Math.pow(10, precision)) / Math.pow(10, precision);\n    let s = result.toString();\n    let rs = s.indexOf('.');\n    if (rs < 0) {\n        rs = s.length;\n        s += '.';\n    }\n    while (s.length <= rs + precision) {\n        s += '0';\n    }\n    return s;\n}\nexport function isEmpty(value) {\n    if (typeof value === 'undefined' || value === null || value === '')\n        return true;\n    return Object.keys(value).length < 1;\n}\nexport function isNotEmpty(value) {\n    return !isEmpty(value);\n}\nexport function getRowIdentity(row, rowKey) {\n    if (typeof rowKey === 'string') {\n        return get(row, rowKey);\n    }\n    if (typeof rowKey === 'function') {\n        return rowKey(row);\n    }\n}\nexport function loadScript(src) {\n    return new Promise((resolve, reject) => {\n        const script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = src;\n        script.onload = resolve;\n        script.onerror = reject;\n        document.head.appendChild(script);\n    });\n}\nexport function setStringFormat(str, replaces = []) {\n    return (!!str &&\n        str.replace(/\\{(\\d+)\\}/g, function (t, r) {\n            return replaces[r] ? replaces[r] : t;\n        }));\n}\nexport const convertSearchFilter = (params) => {\n    const _a = params || {}, { quickSearchProperties = ['code', 'name'], pageInfo = { page: 1, rows: 15 } } = _a, search = __rest(_a, [\"quickSearchProperties\", \"pageInfo\"]);\n    const keys = Object.keys(search);\n    const quickSearchValue = keys.includes('quickValue') ? search.quickValue : '';\n    const filtersKeys = keys.filter(item => item.includes('Q_'));\n    const filters = filtersKeys.map(item => {\n        const itemArr = item.split('_'); // Q_EQ_id_String\n        return {\n            operator: itemArr.length >= 2 ? itemArr[1] : 'EQ',\n            fieldName: itemArr.length >= 3 ? itemArr[2] : '',\n            fieldType: itemArr.length >= 4 ? itemArr[3] : 'String',\n            value: search[item],\n        };\n    });\n    const sortOrdersKeys = keys.filter(item => item.includes('S_'));\n    const sortOrders = sortOrdersKeys.map(item => {\n        const itemArr = item.split('_'); // S_id\n        return {\n            property: itemArr.length >= 2 ? itemArr[1] : '',\n            direction: search[item],\n        };\n    });\n    const otherParams = {};\n    keys.filter(key => {\n        // const bool = !key.includes('Q_') && !key.includes('S_') && !key.includes('quickValue');\n        otherParams[key] = search[key];\n        return true;\n    });\n    return Object.assign({ quickSearchProperties,\n        quickSearchValue,\n        filters,\n        sortOrders,\n        pageInfo }, otherParams);\n};\n/**\n * [getLocale 获取多语言值]\n * @param  {[object]} locales  [多语言map]\n * @param  {[string]} key  [多语言键值]\n * @param  {[string]} desc [描述]\n * @param  {[array]} formatParams [格式化参数]\n * @return {[string]}      [返回key对应的值]\n */\nexport function getLocale(locales, { key, desc }, formatParams) {\n    return setStringFormat(locales[key], formatParams) || desc;\n}\n/*\n * 解析url 判断当前文件是否为图片\n * @param {[string]} url [文件地址]\n */\nexport function isPhoto(url) {\n    url = url || '';\n    return (url.toLowerCase().includes('png') ||\n        url.toLowerCase().includes('jpg') ||\n        url.toLowerCase().includes('gif') ||\n        url.toLowerCase().includes('jpeg'));\n}\nexport function getString(value) {\n    if (value) {\n        if (value.toString) {\n            return value.toString();\n        }\n        return `${value}`;\n    }\n    return value;\n}\nexport function compare(name, direction = 'asc', minor) {\n    return function (o, p) {\n        let a;\n        let b;\n        if (o && p && typeof o === 'object' && typeof p === 'object') {\n            a = o[name];\n            b = p[name];\n            if (a === b) {\n                return typeof minor === 'function' ? minor(o, p) : 0;\n            }\n            if (typeof a === typeof b) {\n                if (direction === 'asc') {\n                    return a < b ? -1 : 1;\n                }\n                return a < b ? 1 : -1;\n            }\n            if (direction === 'asc') {\n                return typeof a < typeof b ? -1 : 1;\n            }\n            return typeof a < typeof b ? 1 : -1;\n        }\n        throw new Error('error');\n    };\n}\n"],"file":"utils.js"}