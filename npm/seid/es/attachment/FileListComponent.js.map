{"version":3,"sources":["attachment/FileListComponent.jsx"],"names":["React","Component","Collapse","CollapsePanel","List","FileItem","FileListComponent","nextProps","typeList","fileList","getFileType","showByFileType","noCategoryList","list","forEach","file","fileType","typeItem","find","t","code","push","categoryList","typeObj","Object","values","props","state","getItemDescription","getUploadTime","getUploadUser","mode","deleteFile","downloadFile","onPreview","onShare","map","name","item","index","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Collapse from 'antd/es/collapse';\nimport CollapsePanel from 'antd/es/collapse/CollapsePanel';\nimport List from 'antd/es/list';\nimport FileItem from './FileItem';\nclass FileListComponent extends Component {\n    static getDerivedStateFromProps(nextProps) {\n        const { typeList, fileList, getFileType, showByFileType } = nextProps;\n        if (!showByFileType)\n            return null;\n        const noCategoryList = [];\n        if (typeList) {\n            const list = [...typeList];\n            fileList.forEach(file => {\n                const fileType = getFileType(file);\n                const typeItem = list.find(t => t.code === fileType.code);\n                if (typeItem) {\n                    if (!typeItem.fileList) {\n                        typeItem.fileList = [];\n                    }\n                    typeItem.fileList.push(file);\n                }\n                else {\n                    noCategoryList.push(file);\n                }\n            });\n            return {\n                categoryList: list,\n                noCategoryList,\n            };\n        }\n        // 计算最新的typeList\n        const typeObj = {};\n        fileList.forEach(file => {\n            const typeItem = getFileType(file);\n            if (!typeItem || !typeItem.code) {\n                noCategoryList.push(file);\n                return;\n            }\n            if (typeObj[typeItem.code]) {\n                typeObj[typeItem.code].fileList.push(file);\n            }\n            else {\n                typeObj[typeItem.code] = Object.assign(Object.assign({}, typeItem), { fileList: [file] });\n            }\n        });\n        return {\n            categoryList: Object.values(typeObj),\n            noCategoryList,\n        };\n    }\n    constructor(props) {\n        super(props);\n        this.state = {\n            categoryList: [],\n            noCategoryList: [],\n        };\n    }\n    render() {\n        const { getItemDescription, getUploadTime, getUploadUser, mode = 'normal', deleteFile, downloadFile, onPreview, onShare, showByFileType, fileList, } = this.props;\n        const { categoryList, noCategoryList } = this.state;\n        if (showByFileType) {\n            return (<div className=\"seid-upload-file-list\">\n          <Collapse bordered={false}>\n            {categoryList.map((typeItem) => (<CollapsePanel key={typeItem.code} header={typeItem.name}>\n                <List dataSource={typeItem.fileList} renderItem={(item, index) => (<FileItem downloadFile={downloadFile} deleteFile={deleteFile} previewFile={onPreview} shareFile={onShare} mode={mode} getItemDescription={getItemDescription} getUploadTime={getUploadTime} getUploadUser={getUploadUser} {...item} index={index}/>)}/>\n              </CollapsePanel>))}\n          </Collapse>\n          {noCategoryList && noCategoryList.length ? (<List dataSource={noCategoryList} renderItem={(item, index) => (<FileItem downloadFile={downloadFile} deleteFile={deleteFile} previewFile={onPreview} shareFile={onShare} mode={mode} getItemDescription={getItemDescription} getUploadTime={getUploadTime} getUploadUser={getUploadUser} {...item} index={index}/>)}/>) : null}\n        </div>);\n        }\n        return (<div className=\"seid-upload-file-list\">\n        <List dataSource={fileList} renderItem={(item, index) => (<FileItem downloadFile={downloadFile} deleteFile={deleteFile} previewFile={onPreview} shareFile={onShare} mode={mode} getItemDescription={getItemDescription} getUploadTime={getUploadTime} getUploadUser={getUploadUser} {...item} index={index}/>)}/>\n      </div>);\n    }\n}\nexport default FileListComponent;\n"],"file":"FileListComponent.js"}