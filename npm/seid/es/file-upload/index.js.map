{"version":3,"sources":["file-upload/index.jsx"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","Button","Icon","message","Modal","Upload","List","Avatar","Checkbox","cls","PropTypes","React","Component","moment","isEmpty","LocaleReceiver","isPhoto","setStringFormat","T","FileUpload","props","initDefaultPhoto","fileList","result","domain","contextUrl","file","fileName","name","push","original","id","handlerViewType","vt","stopPropagation","setState","viewType","handlerPreviewCancel","previewVisible","handlerPreview","downloadUrl","response","Array","downUrl","downloadFileName","handlerDownload","downloading","state","setTimeout","a","document","createElement","style","display","body","appendChild","href","download","click","parentNode","removeChild","chooseFileDownload","batchVisible","batchDownloadList","batchDownloadClose","checkAll","handleChooseImgCheck","includes","filter","item","target","checked","map","handlerBatchDownload","error","batchDownloadFileName","batchDownloadUrl","toString","handleChange","fileObj","onChange","locale","photosFile","fileItem","status","errMsg","renderCmp","contextLocale","_a","customLocale","rest","uploadProps","action","listType","defaultFileList","className","onRemove","onPreview","select","fontSize","disabled","batchDownload","inst","upload","marginRight","filePreview","close","marginLeft","thumbUrl","displayName","propTypes","oneOf","headers","object","string","isRequired","previewUrl","bool","multiple","directory","array","func","defaultProps","format"],"mappings":"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","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n/* eslint-disable */\nimport Button from 'antd/es/button';\nimport Icon from 'antd/es/icon';\nimport message from 'antd/es/message';\nimport Modal from 'antd/es/modal';\nimport Upload from 'antd/es/upload';\nimport List from 'antd/es/list';\nimport Avatar from 'antd/es/avatar';\nimport Checkbox from 'antd/es/checkbox';\nimport cls from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport { isEmpty } from 'lodash';\n// import RcViewer from '../invoice-upload/RcViewer';\nimport LocaleReceiver from '../seid-locale-receiver';\nimport { isPhoto, setStringFormat } from '../_util/utils';\n/**\n * @return {boolean}\n */\nexport function T() {\n    return true;\n}\nexport default class FileUpload extends Component {\n    constructor(props) {\n        super(props);\n        this.initDefaultPhoto = (fileList = []) => {\n            const result = [];\n            const { domain, contextUrl } = this.props;\n            for (let i = 0; i < fileList.length; i += 1) {\n                const file = fileList[i];\n                if (isPhoto(file.fileName || file.name)) {\n                    result.push({\n                        original: `${domain}/${contextUrl}/download?docId=${file.id}`,\n                        id: file.id,\n                        name: file.fileName || file.name,\n                    });\n                }\n            }\n            return result;\n        };\n        this.handlerViewType = (vt, e) => {\n            e.stopPropagation();\n            this.setState({\n                viewType: vt,\n            });\n        };\n        this.handlerPreviewCancel = () => {\n            this.setState({ previewVisible: false });\n        };\n        this.handlerPreview = (file) => {\n            const { /* previewUrl, */ downloadUrl } = this.props;\n            if (file.id ||\n                (file.response && file.response instanceof Array && file.response.length === 1)) {\n                // const { photosFile } = this.state;\n                // const preUrl = `${previewUrl}/${file.id || file.response[0].id}?rand=${Date.now()}`;\n                const downUrl = `${downloadUrl}${file.id || file.response[0].id}`;\n                const fileName = file.id ? file.name : file.response[0].fileName;\n                // const startIndex = photosFile.findIndex((photo: any) => photo.id === file.response[0].id);\n                this.setState({\n                    downloadFileName: fileName,\n                    // previewUrl: preUrl,\n                    downloadUrl: downUrl,\n                    previewVisible: true,\n                });\n            }\n        };\n        this.handlerDownload = () => {\n            this.setState({\n                downloading: true,\n            });\n            const { downloadUrl, downloadFileName } = this.state;\n            setTimeout(() => {\n                const a = document.createElement('a');\n                a.style.display = 'none';\n                document.body.appendChild(a);\n                a.href = downloadUrl;\n                a.download = downloadFileName;\n                a.click();\n                this.setState({\n                    downloading: false,\n                }, () => {\n                    if (a.parentNode)\n                        a.parentNode.removeChild(a);\n                });\n            }, 3000);\n        };\n        this.chooseFileDownload = () => {\n            this.setState({ batchVisible: true, batchDownloadList: [] });\n        };\n        this.batchDownloadClose = () => {\n            this.setState({\n                batchVisible: false,\n                batchDownloadList: [],\n                checkAll: false,\n                downloading: false,\n            });\n        };\n        this.handleChooseImgCheck = (id) => {\n            let { batchDownloadList = [] } = this.state;\n            const { fileList } = this.props;\n            if (batchDownloadList.includes(id)) {\n                batchDownloadList = batchDownloadList.filter((item) => item !== id);\n            }\n            else {\n                batchDownloadList.push(id);\n            }\n            if (fileList.length === batchDownloadList.length) {\n                this.setState({ batchDownloadList, checkAll: true });\n            }\n            else {\n                this.setState({ batchDownloadList, checkAll: false });\n            }\n        };\n        this.checkAll = (e) => {\n            if (e.target.checked) {\n                const { fileList = [] } = this.props;\n                const batchDownloadList = fileList.map((file) => file.response[0].id);\n                this.setState({ batchDownloadList, checkAll: true });\n            }\n            else {\n                this.setState({ batchDownloadList: [], checkAll: false });\n            }\n        };\n        this.handlerBatchDownload = () => {\n            const { batchDownloadList } = this.state;\n            if (isEmpty(batchDownloadList)) {\n                message.error('请选择要下载的文件');\n                return;\n            }\n            const { batchDownloadFileName, batchDownloadUrl } = this.props;\n            this.setState({ downloading: true });\n            setTimeout(() => {\n                const a = document.createElement('a');\n                a.style.display = 'none';\n                document.body.appendChild(a);\n                a.href = `${batchDownloadUrl}?fileName=${batchDownloadFileName}&docIds=${batchDownloadList.toString()}`;\n                a.download = batchDownloadFileName;\n                a.click();\n                this.setState({\n                    downloading: false,\n                    batchVisible: false,\n                }, () => {\n                    if (a.parentNode)\n                        a.parentNode.removeChild(a);\n                });\n            }, 3000);\n        };\n        this.handleChange = (fileObj) => {\n            const { file } = fileObj;\n            let { fileList } = fileObj;\n            const { domain, onChange } = this.props;\n            const { locale } = this;\n            const photosFile = [];\n            fileList.map((fileItem) => {\n                if (fileItem.status === 'done') {\n                    if (isPhoto(fileItem.name)) {\n                        photosFile.push({\n                            original: `${domain}/edm-service/download?docId=${fileItem.response[0].id}`,\n                            id: fileItem.response[0].id,\n                            name: fileItem.name,\n                        });\n                    }\n                }\n                return null;\n            });\n            if (file.status === 'error') {\n                message.error(setStringFormat(locale.errMsg, [file.name, file.response.message]));\n                fileList = fileList.filter((item) => item.status !== 'error');\n            }\n            if (onChange) {\n                onChange(fileObj);\n            }\n            this.setState({ photosFile });\n        };\n        this.renderCmp = (contextLocale) => {\n            const { viewType, previewVisible, \n            // previewUrl,\n            downloading, \n            // photosFile,\n            // startIndex,\n            batchVisible, batchDownloadList, checkAll, } = this.state;\n            const _a = this.props, { locale: customLocale } = _a, rest = __rest(_a, [\"locale\"]);\n            this.locale = Object.assign(Object.assign({}, contextLocale), customLocale);\n            const uploadProps = Object.assign({ action: 'http://dsei.changhong.com:80/edm-service/upload', listType: 'picture', defaultFileList: [], className: viewType, onChange: this.handleChange, onRemove: () => { }, onPreview: (file) => {\n                    this.handlerPreview(file);\n                } }, rest);\n            return (<>\n        <div className={cls('sei-upload')}>\n          <div className={cls('tool-box')}>\n            <span className={cls('tool-btn', { select: viewType === 'list' })} onClick={e => this.handlerViewType('list', e)}>\n              <Icon type=\"bars\" style={{ fontSize: '18px' }}/>\n            </span>\n            <span className={cls('tool-btn', { select: viewType === 'card' })} onClick={e => this.handlerViewType('card', e)}>\n              <Icon type=\"appstore\" style={{ fontSize: '18px' }}/>\n            </span>\n          </div>\n          <div className={cls('download-box')}>\n            {!uploadProps.disabled ? (<Button onClick={this.chooseFileDownload} icon=\"download\">\n                {this.locale.batchDownload}\n              </Button>) : null}\n          </div>\n          <div className={cls('upload-box', { disabled: uploadProps.disabled })}>\n            <Upload {...uploadProps} ref={inst => {\n                this.upload = inst;\n            }}>\n              <div className={cls('upload-tool-bar')}>\n                {!uploadProps.disabled ? (<Button type=\"primary\" icon=\"upload\" style={{ marginRight: 5 }}>\n                    {this.locale.upload}\n                  </Button>) : null}\n              </div>\n            </Upload>\n            <Modal title={this.locale.filePreview} wrapClassName={cls('preview-box')} mask={false} destroyOnClose visible={previewVisible} footer={[\n                <Button key=\"back\" onClick={this.handlerPreviewCancel}>\n                  {this.locale.close}\n                </Button>,\n                <Button key=\"submit\" type=\"primary\" icon=\"download\" loading={downloading} onClick={this.handlerDownload}>\n                  {this.locale.download}\n                </Button>,\n            ]} onCancel={this.handlerPreviewCancel}/>\n            <Modal title={[\n                this.locale.batchDownload,\n                <Checkbox key=\"checkAll\" checked={checkAll} style={{ marginLeft: '8px' }} value onClick={this.checkAll}>\n                  全选\n                </Checkbox>,\n            ]} destroyOnClose visible={batchVisible} footer={[\n                <Button key=\"back\" onClick={this.batchDownloadClose}>\n                  {this.locale.close}\n                </Button>,\n                <Button key=\"batchDownload\" type=\"primary\" icon=\"download\" loading={downloading} onClick={this.handlerBatchDownload}>\n                  {this.locale.batchDownload}\n                </Button>,\n            ]} afterClose={this.batchDownloadClose} onCancel={this.batchDownloadClose}>\n              <List itemLayout=\"horizontal\" dataSource={rest.fileList} renderItem={(item) => (<div onClick={() => this.handleChooseImgCheck(item.response[0].id)}>\n                    <List.Item>\n                      <List.Item.Meta avatar={<Avatar src={item.thumbUrl}/>} title={item.name}/>\n                      <Checkbox checked={batchDownloadList.includes(item.response[0].id)}/>\n                    </List.Item>\n                  </div>)}/>\n            </Modal>\n          </div>\n        </div>\n      </>);\n        };\n        this.state = {\n            viewType: props.viewType,\n            downloadUrl: '',\n            downloadFileName: '',\n            downloading: false,\n            previewVisible: false,\n            batchVisible: false,\n            batchDownloadList: [],\n            // previewUrl: '',\n            photosFile: this.initDefaultPhoto(props.fileList),\n        };\n    }\n    render() {\n        return (<LocaleReceiver componentName=\"FileUpload\" defaultLocale={{}}>\n        {this.renderCmp}\n      </LocaleReceiver>);\n    }\n}\nFileUpload.displayName = 'FileUpload';\nFileUpload.propTypes = {\n    /** 附件列表显示方式 */\n    viewType: PropTypes.oneOf(['list', 'card']),\n    /** 设置上传的请求头部，IE10 以上有效 */\n    headers: PropTypes.object,\n    /** 上传接口地址 */\n    action: PropTypes.string.isRequired,\n    /** 预览接口地址 */\n    previewUrl: PropTypes.string.isRequired,\n    /** 下载接口地址 */\n    downloadUrl: PropTypes.string.isRequired,\n    /** 批量下载接口地址 */\n    batchDownloadUrl: PropTypes.string.isRequired,\n    /** 是否只读 */\n    disabled: PropTypes.bool,\n    /** 多文件上传 */\n    multiple: PropTypes.bool,\n    /** 支持上传文件夹 */\n    directory: PropTypes.bool,\n    /** 默认已经上传的文件列表 */\n    defaultFileList: PropTypes.array,\n    /** 发到后台的文件参数名 */\n    name: PropTypes.string,\n    /** 上传文件改变时的状态 上传中、完成、失败都会调用这个函数。 参照antd */\n    onChange: PropTypes.func,\n    /** 点击移除文件时的回调，返回值为 false 时不移除。支持返回一个 Promise 对象，Promise 对象 resolve(false) 或 reject 时不移除。参照antd */\n    onRemove: PropTypes.func,\n    /** 上传相关接口域名 */\n    domain: PropTypes.string,\n    /** 上下文地址 */\n    contextUrl: PropTypes.string,\n    /** 批量下载文件名 */\n    batchDownloadFileName: PropTypes.string,\n};\nFileUpload.defaultProps = {\n    viewType: 'list',\n    headers: null,\n    disabled: false,\n    multiple: false,\n    directory: false,\n    defaultFileList: [],\n    name: 'file',\n    onChange: null,\n    onRemove: T,\n    domain: '',\n    contextUrl: 'edm-service',\n    batchDownloadFileName: `${moment().format('YYYYMMDD')}批量下载文件`,\n};\n"],"file":"index.js"}