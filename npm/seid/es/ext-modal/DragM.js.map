{"version":3,"sources":["ext-modal/DragM.jsx"],"names":["React","DragM","arguments","position","startX","startY","dx","dy","tx","ty","start","event","button","document","addEventListener","docMove","pageX","pageY","transformStr","props","updateTransform","tdom","docMouseUp","removeEventListener","children","newStyle","style","cursor","userSelect","cloneElement","Children","only","ref","Component","defaultProps","_","__","transform"],"mappings":"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","sourcesContent":["import React from 'react';\nexport default class DragM extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.position = {\n            startX: 0,\n            startY: 0,\n            dx: 0,\n            dy: 0,\n            tx: 0,\n            ty: 0,\n        };\n        this.start = (event) => {\n            if (event.button !== 0) {\n                // 只允许左键，右键问题在于不选择conextmenu就不会触发mouseup事件\n                return;\n            }\n            document.addEventListener('mousemove', this.docMove);\n            this.position.startX = event.pageX - this.position.dx;\n            this.position.startY = event.pageY - this.position.dy;\n        };\n        this.docMove = (event) => {\n            const tx = event.pageX - this.position.startX;\n            const ty = event.pageY - this.position.startY;\n            const transformStr = `translate(${tx}px,${ty}px)`;\n            this.props.updateTransform(transformStr, tx, ty, this.tdom);\n            this.position.dx = tx;\n            this.position.dy = ty;\n        };\n        this.docMouseUp = () => {\n            document.removeEventListener('mousemove', this.docMove);\n        };\n    }\n    componentDidMount() {\n        this.tdom.addEventListener('mousedown', this.start);\n        // 用document移除对mousemove事件的监听\n        document.addEventListener('mouseup', this.docMouseUp);\n    }\n    componentWillUnmount() {\n        this.tdom.removeEventListener('mousedown', this.start);\n        document.removeEventListener('mouseup', this.docMouseUp);\n        document.removeEventListener('mousemove', this.docMove);\n    }\n    render() {\n        const { children } = this.props;\n        const newStyle = Object.assign(Object.assign({}, children.props.style), { cursor: 'move', userSelect: 'none' });\n        return React.cloneElement(React.Children.only(children), {\n            ref: (tdom) => {\n                return (this.tdom = tdom);\n            },\n            style: newStyle,\n        });\n    }\n}\nDragM.defaultProps = {\n    // 默认是移动children dom,覆盖该方法，可以把tranform行为同步给外部\n    updateTransform: (transformStr, _, __, tdom) => {\n        tdom.style.transform = transformStr;\n    },\n};\n"],"file":"DragM.js"}