{"version":3,"sources":["upload-file-list/index.jsx"],"names":["React","Button","Upload","Progress","message","Row","get","ExtIcon","request","previewList","UploadFileList","props","formatFiles","fileList","Array","isArray","list","urlKey","thumbKey","downloadDocumentAPI","EDM_URL","forEach","file","fileId","push","showPreview","visible","showDownload","handleRemove","beforeDel","onChange","state","filter","item","uid","setState","showDel","disable","getIcon","fileType","name","split","slice","toLowerCase","fontSize","handlePreview","status","indexOf","fileItem","del","preview","download","canPreview","error","percent","uploadCard","map","handleBeforeFile","fileTypes","fileSize","beforeUpload","suffixs","toString","size","handleChange","info","response","archiveId","f","handleUpload","option","onSuccess","onProgress","onError","Math","round","entityId","url","uploadDocumentsAPI","data","FormData","append","method","onUploadProgress","loaded","total","Number","toFixed","then","res","e","nextProps","fileNum","btnText","action","showUploadList","customRequest","editable","length","Component","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Button from 'antd/es/button';\nimport Upload from 'antd/es/upload';\nimport Progress from 'antd/es/progress';\nimport message from 'antd/es/message';\nimport Row from 'antd/es/row';\nimport get from 'lodash/get';\nimport ExtIcon from '../ext-icon';\nimport { request } from '../utils';\n// emd支持的预览类型\nconst previewList = ['pdf', 'png', 'jpg', 'gif', 'jpeg', 'doc', 'docx'];\nclass UploadFileList extends React.Component {\n    constructor(props) {\n        super(props);\n        this.formatFiles = (fileList) => {\n            if (fileList && Array.isArray(fileList)) {\n                const list = [];\n                const { urlKey, thumbKey, downloadDocumentAPI, EDM_URL } = this.props;\n                fileList.forEach((file) => {\n                    if (file.fileId) {\n                        file[urlKey] = `${downloadDocumentAPI}?id=${file.fileId}`;\n                        file[thumbKey] = `${EDM_URL}/${file.fileId}`;\n                    }\n                    list.push(file);\n                });\n                return list;\n            }\n            return [];\n        };\n        this.showPreview = (visible, file) => {\n            const { thumbKey } = this.props;\n            return file[thumbKey] && visible ? (<a href={file[thumbKey]} rel=\"noopener noreferrer\" title=\"预览文件\" target=\"_blank\">\n        <ExtIcon antd type=\"eye\" theme=\"outlined\"/>\n      </a>) : null;\n        };\n        this.showDownload = (visible, file) => {\n            const { urlKey } = this.props;\n            return file[urlKey] && visible ? (<a href={file[urlKey]} rel=\"noopener noreferrer\" title=\"下载文件\" target=\"_blank\">\n        <ExtIcon antd type=\"cloud-download\" theme=\"outlined\"/>\n      </a>) : null;\n        };\n        // 删除文件\n        this.handleRemove = (file) => {\n            const { beforeDel, onChange } = this.props;\n            const { fileList = [] } = this.state;\n            // 判断是否能够删除\n            if (beforeDel && !beforeDel(file))\n                return;\n            const list = fileList.filter(item => file.uid !== item.uid);\n            if (onChange)\n                onChange(list);\n            this.setState({\n                fileList: list,\n            });\n        };\n        this.showDel = (visible, item) => {\n            const { disable } = this.props;\n            return !disable && visible ? (<a onClick={() => this.handleRemove(item)} title=\"删除文件\">\n        <ExtIcon type=\"close\" antd theme=\"outlined\"/>\n      </a>) : null;\n        };\n        this.getIcon = (file) => {\n            let fileType = file.name ? file.name.split('.').slice(-1)[0] : '';\n            const { thumbKey } = this.props;\n            // 统一转化为小写\n            fileType = fileType ? fileType.toLowerCase() : '';\n            if (fileType === 'doc' || fileType === 'docx') {\n                return <ExtIcon style={{ fontSize: '86px' }} type=\"word\"/>;\n            }\n            if (fileType === 'xls' || fileType === 'xlsx') {\n                return <ExtIcon style={{ fontSize: '86px' }} type=\"excel\"/>;\n            }\n            if (fileType === 'pdf') {\n                return <ExtIcon style={{ fontSize: '86px' }} type=\"pdf\"/>;\n            }\n            if (fileType === 'zip' || fileType === 'rar' || fileType === '7z') {\n                return <ExtIcon style={{ fontSize: '86px' }} type=\"zip\"/>;\n            }\n            if (fileType === 'png' || fileType === 'jpg' || fileType === 'gif' || fileType === 'jpeg') {\n                // 显示预览图片地址\n                return <img src={file[thumbKey]} alt={file.name}/>;\n            }\n            return <ExtIcon style={{ fontSize: '86px' }} type=\"icon-file\"/>;\n        };\n        this.handlePreview = (file, status) => {\n            if (!status)\n                return false;\n            let fileType = file.name ? file.name.split('.').slice(-1)[0] : '';\n            // 统一转化为小写\n            fileType = fileType ? fileType.toLowerCase() : '';\n            return status && previewList.indexOf(fileType) > -1;\n        };\n        this.fileItem = (file) => {\n            const { del, preview, download } = this.props;\n            const canPreview = this.handlePreview(file, preview);\n            if (file.error) {\n                return (<div className=\"seid-upload-loading\">\n          <div className=\"seid-upload-loading\">上传失败</div>\n          {this.showDel(del, file)}\n        </div>);\n            }\n            if (file.status === 'uploading') {\n                return (<div className=\"seid-upload-loading\">\n          <div className=\"seid-upload-loading\">正在上传...</div>\n          <Progress percent={file.percent}/>\n        </div>);\n            }\n            return (<div className=\"seid-upload-item\">\n        <div className=\"seid-item-info\">\n          <span>{this.getIcon(file)}</span>\n        </div>\n        <div title={file.name} className=\"seid-item-title\">\n          {file.name}\n        </div>\n        <span className=\"seid-item-action\">\n          {this.showPreview(canPreview, file)}\n          {this.showDownload(download, file)}\n          {this.showDel(del, file)}\n        </span>\n      </div>);\n        };\n        this.uploadCard = (fileList) => fileList.map((item) => (<div key={item.uid} className=\"seid-upload-card\">\n        {this.fileItem(item)}\n      </div>));\n        // 限制文件类型， 文件大小\n        this.handleBeforeFile = (file) => {\n            const { fileTypes, fileSize, beforeUpload } = this.props;\n            // 自定义额外的过滤内容\n            if (beforeUpload && !beforeUpload(file))\n                return false;\n            let suffixs = file.name ? file.name.split('.').slice(-1)[0] : '';\n            // 统一转化为小写\n            suffixs = suffixs ? suffixs.toLowerCase() : '';\n            if (fileTypes.indexOf(suffixs) < 0) {\n                message.error(`支持上传的类型为：${fileTypes.toString()}`);\n                return false;\n            }\n            if (file.size > fileSize * 1024 * 1024) {\n                message.error(`上传文件大小不允许超过${fileSize}M！`);\n                return false;\n            }\n            return true;\n        };\n        this.handleChange = (info) => {\n            const { urlKey, thumbKey, onChange, downloadDocumentAPI, EDM_URL } = this.props;\n            let { fileList } = info;\n            // 2. Read from response and show file link\n            fileList = fileList.map((file) => {\n                if (file.response) {\n                    const { response } = file;\n                    const archiveId = get(response, '[0].id');\n                    // Component will show file.url as link\n                    file[urlKey] = `${downloadDocumentAPI}?id=${archiveId}`;\n                    file[thumbKey] = `${EDM_URL}/${archiveId}`;\n                    file.fileId = archiveId;\n                }\n                return file;\n            });\n            // 3. Filter successfully uploaded files according to response from server\n            fileList = fileList.filter(f => f.status && true);\n            if (onChange)\n                onChange(fileList);\n            this.setState({ fileList });\n        };\n        this.handleUpload = (option) => {\n            const { file, onSuccess, onProgress, onError } = option;\n            const fileSize = file.size && file.size > 1024 ? Math.round(file.size / 1024) : 1;\n            const { fileType, entityId, url = null, uploadDocumentsAPI } = this.props;\n            const { name = '' } = file;\n            const data = new FormData();\n            data.append('request', file);\n            data.append('fileName', name);\n            data.append('type', fileType);\n            data.append('entityId', `${entityId}`);\n            data.append('fileSize', `${fileSize}`);\n            request({\n                method: 'post',\n                url: url || uploadDocumentsAPI,\n                data,\n                onUploadProgress: ({ loaded, total }) => {\n                    const percent = Number(Math.round((loaded / total) * 100).toFixed(2));\n                    onProgress({ percent, status: 'uploading' }, option.file);\n                },\n            })\n                .then(res => {\n                if (get(res, 'success')) {\n                    onSuccess(res.data, file);\n                }\n                else {\n                    message.error(get(res, 'data.message'));\n                    onError(get(res, 'data.message'), null);\n                }\n            })\n                .catch(e => {\n                onError(e, null);\n            });\n        };\n        this.state = {\n            fileList: this.formatFiles(props.fileList),\n        };\n    }\n    // eslint-disabled-lint no-deprecated\n    componentWillReceiveProps(nextProps) {\n        this.setState({\n            fileList: this.formatFiles(nextProps.fileList),\n        });\n    }\n    componentWillUnmount() {\n        // 销毁后清空fileList\n        this.setState({ fileList: [] });\n    }\n    render() {\n        const { fileNum, disable, btnText, uploadDocumentsAPI } = this.props;\n        const props = {\n            name: 'file',\n            action: uploadDocumentsAPI,\n            showUploadList: false,\n            onChange: this.handleChange,\n            beforeUpload: this.handleBeforeFile,\n            customRequest: this.handleUpload,\n        };\n        const { fileList } = this.state;\n        const editable = !disable && fileNum && fileNum > fileList.length;\n        return (<>\n        <Upload {...props} fileList={fileList}>\n          <Button disabled={!editable}>\n            <ExtIcon type=\"cloud-upload\" antd/>\n            {btnText}\n          </Button>\n        </Upload>\n        <Row>{this.uploadCard(fileList)}</Row>\n      </>);\n    }\n}\nUploadFileList.defaultProps = {\n    del: true,\n    preview: true,\n    download: true,\n    urlKey: 'url',\n    thumbKey: 'thumbUrl',\n    fileTypes: [],\n    fileNum: 1,\n    fileSize: 10,\n    fileType: 1,\n    disable: false,\n    btnText: '上传文件',\n    downloadDocumentAPI: '/uploadFile/download',\n    EDM_URL: '/edm-service/preview',\n    uploadDocumentsAPI: '/uploadFile/uploadDocuments',\n};\nexport default UploadFileList;\n"],"file":"index.js"}