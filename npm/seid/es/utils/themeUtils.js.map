{"version":3,"sources":["utils/themeUtils.jsx"],"names":["message","isNotEmpty","loadScript","lessLoaded","setThemes","obj","func","set","changeColor","window","less","modifyVars","then","destroy","success","lessUrl","async","javascriptEnabled","parseThemes","str","JSON","parse","replace","e","console","error"],"mappings":";;AAAA,OAAOA,OAAP,MAAoB,iBAApB;AACA,OAAO,uBAAP;AACA,SAASC,UAAT,EAAqBC,UAArB,QAAuC,gBAAvC;AACA,IAAIC,UAAU,GAAG,KAAjB;AACA;;;;;;;AAMA,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,GAAD,EAAMC,IAAN,EAA2B;AAAA,MAAfC,GAAe,uEAAT,IAAS;;AAChD,MAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AACtBC,IAAAA,MAAM,CAACC,IAAP,CACKC,UADL,CACgB,SAAc,EAAd,EAAkBN,GAAlB,CADhB,EAEKO,IAFL,CAEU,YAAM;AACZ,UAAIL,GAAJ,EAAS;AACLP,QAAAA,OAAO,CAACa,OAAR,GADK,CACc;;AACnBb,QAAAA,OAAO,CAACc,OAAR,CAAgB,SAAhB;AACH;;AACD,UAAIR,IAAJ,EAAU;AACNA,QAAAA,IAAI;AACP;AACJ,KAVD;AAWH,GAZD;;AAaA,MAAMS,OAAO,GAAG,8DAAhB;;AACA,MAAIZ,UAAJ,EAAgB;AACZK,IAAAA,WAAW;AACd,GAFD,MAGK;AACDC,IAAAA,MAAM,CAACC,IAAP,GAAc;AACVM,MAAAA,KAAK,EAAE,IADG;AAEVC,MAAAA,iBAAiB,EAAE;AAFT,KAAd;AAIAf,IAAAA,UAAU,CAACa,OAAD,CAAV,CAAoBH,IAApB,CAAyB,YAAM;AAC3BT,MAAAA,UAAU,GAAG,IAAb;AACAK,MAAAA,WAAW;AACd,KAHD;AAIH;AACJ,CA5BM;AA6BP;;;;;;AAKA,OAAO,IAAMU,WAAW,GAAG,SAAdA,WAAc,CAACC,GAAD,EAAS;AAChC,MAAId,GAAG,GAAG,EAAV;;AACA,MAAIJ,UAAU,CAACkB,GAAD,CAAd,EAAqB;AACjB,QAAI;AACAd,MAAAA,GAAG,GAAGe,IAAI,CAACC,KAAL,CAAWF,GAAG,CACfG,OADY,CACJ,SADI,EACO,kBADP,EAEZA,OAFY,CAEJ,QAFI,EAEM,mBAFN,EAGZA,OAHY,CAGJ,OAHI,EAGK,qBAHL,EAIZA,OAJY,CAIJ,SAJI,EAIO,eAJP,EAKZA,OALY,CAKJ,QALI,EAKM,qBALN,CAAX,CAAN;AAMH,KAPD,CAQA,OAAOC,CAAP,EAAU;AACNC,MAAAA,OAAO,CAACC,KAAR,CAAcF,CAAC,CAACvB,OAAhB;AACH;AACJ;;AACD,SAAOK,GAAP;AACH,CAhBM;AAiBP,eAAe;AACXD,EAAAA,SAAS,EAATA,SADW;AAEXc,EAAAA,WAAW,EAAXA;AAFW,CAAf","sourcesContent":["import message from 'antd/es/message';\nimport 'antd/es/message/style';\nimport { isNotEmpty, loadScript } from '../_util/utils';\nlet lessLoaded = false;\n/**\n * 设置页面的主题\n * @param obj\n * @param func\n * @param set\n */\nexport const setThemes = (obj, func, set = true) => {\n    const changeColor = () => {\n        window.less\n            .modifyVars(Object.assign({}, obj))\n            .then(() => {\n            if (set) {\n                message.destroy(); // 过快弹出多个\n                message.success('预览主题成功.');\n            }\n            if (func) {\n                func();\n            }\n        });\n    };\n    const lessUrl = 'https://gw.alipayobjects.com/os/es/less.js/3.8.1/less.min.js';\n    if (lessLoaded) {\n        changeColor();\n    }\n    else {\n        window.less = {\n            async: true,\n            javascriptEnabled: true,\n        };\n        loadScript(lessUrl).then(() => {\n            lessLoaded = true;\n            changeColor();\n        });\n    }\n};\n/**\n * 解析页面的主题\n * @param str\n * @return {any}\n */\nexport const parseThemes = (str) => {\n    let obj = {};\n    if (isNotEmpty(str)) {\n        try {\n            obj = JSON.parse(str\n                .replace('@header', '@head-back_color')\n                .replace('@sider', '@sider-back_color')\n                .replace('@font', '@sider-select_color')\n                .replace('@button', '@select-color')\n                .replace('@table', '@table_header_color'));\n        }\n        catch (e) {\n            console.error(e.message);\n        }\n    }\n    return obj;\n};\nexport default {\n    setThemes,\n    parseThemes,\n};\n"],"file":"themeUtils.js"}