{"version":3,"sources":["utils/storage.jsx"],"names":["mergeKey","key","prefix","getCacheHelper","storageType","set","data","kvStr","JSON","stringify","kv","window","btoa","encodeURIComponent","setItem","setWithPrefix","get","getItem","parse","decodeURIComponent","atob","e","getWithPrefix","setNative","setNativeWithPrefix","getNative","getNativeWithPrefix","clear","Array","isArray","forEach","k","removeItem","clearWithPrefix","keyTmp","localStorage","sessionStorage"],"mappings":"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","sourcesContent":["export const mergeKey = (key, prefix) => {\n    return `${prefix || 'seid'}_${key}`;\n};\nconst getCacheHelper = (storageType) => ({\n    /** base64加密存储 */\n    set(key, data) {\n        const kvStr = JSON.stringify(data);\n        const kv = window.btoa(window.encodeURIComponent(kvStr));\n        window[storageType].setItem(key, kv);\n    },\n    setWithPrefix(key, data, prefix) {\n        const kvStr = JSON.stringify(data);\n        const kv = window.btoa(window.encodeURIComponent(kvStr));\n        window[storageType].setItem(mergeKey(key, prefix), kv);\n    },\n    /** 解密取出 */\n    get(key) {\n        const kv = window[storageType].getItem(key);\n        if (kv) {\n            try {\n                return JSON.parse(window.decodeURIComponent(window.atob(kv)));\n            }\n            catch (e) {\n                return JSON.parse(kv);\n            }\n        }\n        return null;\n    },\n    getWithPrefix(key, prefix) {\n        const kv = window[storageType].getItem(mergeKey(key, prefix));\n        if (kv) {\n            try {\n                return JSON.parse(window.decodeURIComponent(window.atob(kv)));\n            }\n            catch (e) {\n                return JSON.parse(kv);\n            }\n        }\n        return null;\n    },\n    /** 非加密存储 */\n    setNative(key, data) {\n        const kvStr = JSON.stringify(data);\n        window[storageType].setItem(key, kvStr);\n    },\n    setNativeWithPrefix(key, data, prefix) {\n        const kvStr = JSON.stringify(data);\n        window[storageType].setItem(mergeKey(key, prefix), kvStr);\n    },\n    /** 取值 */\n    getNative(key) {\n        const kv = window[storageType].getItem(key);\n        if (kv) {\n            try {\n                return JSON.parse(kv);\n            }\n            catch (e) {\n                return kv;\n            }\n        }\n        return null;\n    },\n    getNativeWithPrefix(key, prefix) {\n        const kv = window[storageType].getItem(mergeKey(key, prefix));\n        if (kv) {\n            try {\n                return JSON.parse(kv);\n            }\n            catch (e) {\n                return kv;\n            }\n        }\n        return null;\n    },\n    clear(key) {\n        if (key) {\n            if (Array.isArray(key)) {\n                key.forEach(k => {\n                    window[storageType].removeItem(k);\n                });\n            }\n            else {\n                window[storageType].removeItem(key);\n            }\n        }\n        else {\n            window[storageType].clear();\n        }\n    },\n    clearWithPrefix(key, prefix) {\n        if (key) {\n            if (Array.isArray(key)) {\n                key.forEach(k => {\n                    const keyTmp = mergeKey(k, prefix);\n                    window[storageType].removeItem(keyTmp);\n                });\n            }\n            else {\n                const keyTmp = mergeKey(key, prefix);\n                window[storageType].removeItem(keyTmp);\n            }\n        }\n        else {\n            window[storageType].clear();\n        }\n    },\n});\nexport default {\n    localStorage: getCacheHelper('localStorage'),\n    sessionStorage: getCacheHelper('sessionStorage'),\n};\n"],"file":"storage.js"}