{"version":3,"sources":["portal-panel/index.jsx"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","React","Component","Suspense","cls","PropTypes","Responsive","WidthProvider","omit","isEqual","Panel","ListLoader","LocaleReceiver","defaultLocale","ResponsiveGridLayout","Index","props","onLayoutChange","layout","layouts","setState","onBreakpointChange","breakpoint","cols","getWidgetLayout","id","state","lts","renderGridItem","widgets","autoHideToolbar","onClose","isDraggable","map","widgetItem","draggable","closable","lazy","title","widget","renderPortal","_a","className","style","rest","gridLayoutProps","_preProps","preState","defaultProps","breakpoints","lg","md","sm","xs","xxs","rowHeight","compactType","draggableHandle","isResizable","propTypes","bool","string","oneOf"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,IAAIA,MAAM,GAAI,QAAQ,KAAKA,MAAd,IAAyB,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAClD,MAAIC,CAAC,GAAG,EAAR;;AACA,OAAK,IAAIC,CAAT,IAAcH,CAAd;AAAiB,QAAII,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCP,CAArC,EAAwCG,CAAxC,KAA8CF,CAAC,CAACO,OAAF,CAAUL,CAAV,IAAe,CAAjE,EACbD,CAAC,CAACC,CAAD,CAAD,GAAOH,CAAC,CAACG,CAAD,CAAR;AADJ;;AAEA,MAAIH,CAAC,IAAI,IAAL,IAAa,OAAOI,MAAM,CAACK,qBAAd,KAAwC,UAAzD,EACI,KAAK,IAAIC,CAAC,GAAG,CAAR,EAAWP,CAAC,GAAGC,MAAM,CAACK,qBAAP,CAA6BT,CAA7B,CAApB,EAAqDU,CAAC,GAAGP,CAAC,CAACQ,MAA3D,EAAmED,CAAC,EAApE,EAAwE;AACpE,QAAIT,CAAC,CAACO,OAAF,CAAUL,CAAC,CAACO,CAAD,CAAX,IAAkB,CAAlB,IAAuBN,MAAM,CAACC,SAAP,CAAiBO,oBAAjB,CAAsCL,IAAtC,CAA2CP,CAA3C,EAA8CG,CAAC,CAACO,CAAD,CAA/C,CAA3B,EACIR,CAAC,CAACC,CAAC,CAACO,CAAD,CAAF,CAAD,GAAUV,CAAC,CAACG,CAAC,CAACO,CAAD,CAAF,CAAX;AACP;AACL,SAAOR,CAAP;AACH,CAVD;;AAWA,OAAOW,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,GAAP,MAAgB,YAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,UAAT,EAAqBC,aAArB,QAA0C,mBAA1C;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,UAAP,MAAuB,gBAAvB;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AACA,OAAOC,aAAP,MAA0B,UAA1B;AACA,IAAMC,oBAAoB,GAAGP,aAAa,CAACD,UAAD,CAA1C;;IACMS,K;;;;;AACF,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,+EAAMA,KAAN;;AACA,UAAKC,cAAL,GAAsB,UAACC,MAAD,EAASC,OAAT,EAAqB;AAAA,UAC/BF,cAD+B,GACZ,MAAKD,KADO,CAC/BC,cAD+B;;AAEvC,YAAKG,QAAL,CAAc;AAAED,QAAAA,OAAO,EAAPA;AAAF,OAAd,EAA2B,YAAM;AAC7B,YAAIF,cAAJ,EAAoB;AAChBA,UAAAA,cAAc,CAACC,MAAD,EAASC,OAAT,CAAd;AACH;AACJ,OAJD;AAKH,KAPD;;AAQA,UAAKE,kBAAL,GAA0B,UAACC,UAAD,EAAaC,IAAb,EAAsB;AAC5C,YAAKH,QAAL,CAAc;AACVE,QAAAA,UAAU,EAAVA,UADU;AAEVC,QAAAA,IAAI,EAAJA;AAFU,OAAd;AAIH,KALD;;AAMA,UAAKC,eAAL,GAAuB,UAACC,EAAD,EAAQ;AAAA,wBACK,MAAKC,KADV;AAAA,UACnBJ,UADmB,eACnBA,UADmB;AAAA,UACPH,OADO,eACPA,OADO;AAE3B,UAAMQ,GAAG,GAAGR,OAAO,CAACG,UAAD,CAAnB;AACA,UAAIJ,MAAM,GAAG,IAAb;;AACA,UAAIS,GAAJ,EAAS;AACL,aAAK,IAAI7B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6B,GAAG,CAAC5B,MAAxB,EAAgCD,CAAC,IAAI,CAArC,EAAwC;AACpC,cAAI6B,GAAG,CAAC7B,CAAD,CAAH,CAAOA,CAAP,KAAa2B,EAAjB,EAAqB;AACjBP,YAAAA,MAAM,GAAGS,GAAG,CAAC7B,CAAD,CAAZ;AACA;AACH;AACJ;AACJ;;AACD,aAAOoB,MAAP;AACH,KAbD;;AAcA,UAAKU,cAAL,GAAsB,YAAM;AAAA,UAChBC,OADgB,GACJ,MAAKH,KADD,CAChBG,OADgB;AAAA,wBAE0B,MAAKb,KAF/B;AAAA,UAEhBc,eAFgB,eAEhBA,eAFgB;AAAA,UAECC,OAFD,eAECA,OAFD;AAAA,UAEUC,WAFV,eAEUA,WAFV;AAGxB,aAAOH,OAAO,CAACI,GAAR,CAAY,UAACC,UAAD,EAAgB;AAC/B,YAAIC,SAAS,GAAGH,WAAhB;AACA,YAAII,QAAQ,GAAGF,UAAU,CAACE,QAAX,KAAwB,KAAK,CAA7B,GAAiC,IAAjC,GAAwCF,UAAU,CAACE,QAAlE;;AACA,YAAIF,UAAU,CAAChB,MAAX,IAAqBgB,UAAU,CAAChB,MAAX,CAAkBc,WAAlB,KAAkC,KAAK,CAAhE,EAAmE;AAC/DG,UAAAA,SAAS,GAAGD,UAAU,CAAChB,MAAX,CAAkBc,WAA9B;AACH;;AACD,YAAMd,MAAM,GAAG,MAAKM,eAAL,CAAqBU,UAAU,CAACT,EAAhC,KAAuCS,UAAU,CAAChB,MAAjE;;AACA,YAAIgB,UAAU,CAACG,IAAf,EAAqB;AACjB,iBAAQ;AAAK,YAAA,GAAG,EAAEH,UAAU,CAACT,EAArB;AAAyB,YAAA,SAAS,EAAErB,GAAG,CAAC,gBAAD,CAAvC;AAA2D,yBAAWc;AAAtE,aAChB,oBAAC,KAAD;AAAO,YAAA,GAAG,mBAAYgB,UAAU,CAACT,EAAvB,CAAV;AAAuC,YAAA,QAAQ,EAAES,UAAU,CAACT,EAA5D;AAAgE,YAAA,QAAQ,EAAEW,QAA1E;AAAoF,YAAA,KAAK,EAAEF,UAAU,CAACI,KAAtG;AAA6G,YAAA,eAAe,EAAER,eAA9H;AAA+I,YAAA,OAAO,EAAEC,OAAxJ;AAAiK,YAAA,QAAQ,EAAEI,SAA3K;AAAsL,YAAA,QAAQ;AAA9L,aACE,oBAAC,QAAD;AAAU,YAAA,QAAQ,EAAE,oBAAC,UAAD;AAApB,aAAqCD,UAAU,CAACK,MAAhD,CADF,CADgB,CAAR;AAKH;;AACD,eAAQ;AAAK,UAAA,GAAG,EAAEL,UAAU,CAACT,EAArB;AAAyB,UAAA,SAAS,EAAErB,GAAG,CAAC,gBAAD,CAAvC;AAA2D,uBAAWc;AAAtE,WACd,oBAAC,KAAD;AAAO,UAAA,GAAG,mBAAYgB,UAAU,CAACT,EAAvB,CAAV;AAAuC,UAAA,QAAQ,EAAES,UAAU,CAACT,EAA5D;AAAgE,UAAA,QAAQ,EAAEW,QAA1E;AAAoF,UAAA,KAAK,EAAEF,UAAU,CAACI,KAAtG;AAA6G,UAAA,eAAe,EAAER,eAA9H;AAA+I,UAAA,OAAO,EAAEC,OAAxJ;AAAiK,UAAA,QAAQ,EAAEI,SAA3K;AAAsL,UAAA,QAAQ;AAA9L,WACGD,UAAU,CAACK,MADd,CADc,CAAR;AAKH,OAnBM,CAAP;AAoBH,KAvBD;;AAwBA,UAAKC,YAAL,GAAoB,YAAM;AAChB,UAAAC,EAAE,GAAG,MAAKzB,KAAV;AAAA,UAAmB0B,SAAnB,GAAwCD,EAAxC,CAAmBC,SAAnB;AAAA,UAA8BC,KAA9B,GAAwCF,EAAxC,CAA8BE,KAA9B;AAAA,UAA4CC,IAA5C,GAAmDzD,MAAM,CAACsD,EAAD,EAAK,CAAC,WAAD,EAAc,OAAd,CAAL,CAAzD;;AADgB,UAEdtB,OAFc,GAEF,MAAKO,KAFH,CAEdP,OAFc;AAGtB,UAAM0B,eAAe,GAAGrC,IAAI,CAACoC,IAAD,EAAO,CAAC,YAAD,EAAe,SAAf,EAA0B,iBAA1B,EAA6C,SAA7C,CAAP,CAA5B;AACA,aAAQ;AAAK,QAAA,SAAS,EAAExC,GAAG,CAAC,mBAAD,EAAsBsC,SAAtB,CAAnB;AAAqD,QAAA,KAAK,EAAEC;AAA5D,SACZ,oBAAC,oBAAD;AAAsB,QAAA,SAAS,EAAC,QAAhC;AAAyC,QAAA,OAAO,EAAExB;AAAlD,SAA+D0B,eAA/D;AAAgF,QAAA,kBAAkB,EAAE,MAAKxB,kBAAzG;AAA6H,QAAA,cAAc,EAAE,MAAKJ;AAAlJ,UACG,MAAKW,cAAL,EADH,CADY,CAAR;AAKH,KATD;;AAtDe,QAgEPC,OAhEO,GAgEcb,KAhEd,CAgEPa,OAhEO;AAAA,QAgEEV,OAhEF,GAgEcH,KAhEd,CAgEEG,OAhEF;AAiEf,UAAKO,KAAL,GAAa;AACTP,MAAAA,OAAO,EAAEA,OAAO,IAAI,EADX;AAETU,MAAAA,OAAO,EAAPA,OAFS;AAGTP,MAAAA,UAAU,EAAE,IAHH;AAITC,MAAAA,IAAI,EAAE;AAJG,KAAb;AAjEe;AAuElB;;;;uCACkBuB,S,EAAWC,Q,EAAU;AACpC,UAAI,CAACtC,OAAO,CAACsC,QAAQ,CAAClB,OAAV,EAAmB,KAAKb,KAAL,CAAWa,OAA9B,CAAZ,EAAoD;AAAA,YACxCA,OADwC,GAC5B,KAAKb,KADuB,CACxCa,OADwC;AAEhD,aAAKT,QAAL,CAAc;AACVS,UAAAA,OAAO,EAAPA;AADU,SAAd;AAGH;AACJ;;;6BACQ;AACL,aAAQ,oBAAC,cAAD;AAAgB,QAAA,aAAa,EAAEhB,aAA/B;AAA8C,QAAA,aAAa,EAAC;AAA5D,SACP,KAAK2B,YADE,CAAR;AAGH;;;;EArFetC,S;;AAuFpBa,KAAK,CAACiC,YAAN,GAAqB;AACjBlB,EAAAA,eAAe,EAAE,KADA;AAEjBmB,EAAAA,WAAW,EAAE;AAAEC,IAAAA,EAAE,EAAE,IAAN;AAAYC,IAAAA,EAAE,EAAE,GAAhB;AAAqBC,IAAAA,EAAE,EAAE,GAAzB;AAA8BC,IAAAA,EAAE,EAAE,GAAlC;AAAuCC,IAAAA,GAAG,EAAE;AAA5C,GAFI;AAGjB/B,EAAAA,IAAI,EAAE;AAAE2B,IAAAA,EAAE,EAAE,EAAN;AAAUC,IAAAA,EAAE,EAAE,EAAd;AAAkBC,IAAAA,EAAE,EAAE,CAAtB;AAAyBC,IAAAA,EAAE,EAAE,CAA7B;AAAgCC,IAAAA,GAAG,EAAE;AAArC,GAHW;AAIjBC,EAAAA,SAAS,EAAE,GAJM;AAKjB1B,EAAAA,OAAO,EAAE,EALQ;AAMjB2B,EAAAA,WAAW,EAAE,YANI;AAOjBC,EAAAA,eAAe,EAAE,oBAPA;AAQjBzB,EAAAA,WAAW,EAAE,IARI;AASjB0B,EAAAA,WAAW,EAAE;AATI,CAArB;AAWA3C,KAAK,CAAC4C,SAAN,GAAkB;AACdvB,EAAAA,QAAQ,EAAE/B,SAAS,CAACuD,IADN;AAEdtB,EAAAA,KAAK,EAAEjC,SAAS,CAACwD,MAFH;AAGdnB,EAAAA,SAAS,EAAErC,SAAS,CAACwD,MAHP;AAIdL,EAAAA,WAAW,EAAEnD,SAAS,CAACyD,KAAV,CAAgB,CAAC,UAAD,EAAa,YAAb,CAAhB,CAJC;AAKdL,EAAAA,eAAe,EAAEpD,SAAS,CAACwD;AALb,CAAlB;AAOA,eAAe9C,KAAf","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { Component, Suspense } from 'react';\nimport cls from 'classnames';\nimport PropTypes from 'prop-types';\nimport { Responsive, WidthProvider } from 'react-grid-layout';\nimport omit from 'omit.js';\nimport isEqual from 'react-fast-compare';\nimport Panel from '../panel';\nimport ListLoader from '../list-loader';\nimport LocaleReceiver from '../seid-locale-receiver';\nimport defaultLocale from './locale';\nconst ResponsiveGridLayout = WidthProvider(Responsive);\nclass Index extends Component {\n    constructor(props) {\n        super(props);\n        this.onLayoutChange = (layout, layouts) => {\n            const { onLayoutChange } = this.props;\n            this.setState({ layouts }, () => {\n                if (onLayoutChange) {\n                    onLayoutChange(layout, layouts);\n                }\n            });\n        };\n        this.onBreakpointChange = (breakpoint, cols) => {\n            this.setState({\n                breakpoint,\n                cols,\n            });\n        };\n        this.getWidgetLayout = (id) => {\n            const { breakpoint, layouts } = this.state;\n            const lts = layouts[breakpoint];\n            let layout = null;\n            if (lts) {\n                for (let i = 0; i < lts.length; i += 1) {\n                    if (lts[i].i === id) {\n                        layout = lts[i];\n                        break;\n                    }\n                }\n            }\n            return layout;\n        };\n        this.renderGridItem = () => {\n            const { widgets } = this.state;\n            const { autoHideToolbar, onClose, isDraggable } = this.props;\n            return widgets.map((widgetItem) => {\n                let draggable = isDraggable;\n                let closable = widgetItem.closable === void 0 ? true : widgetItem.closable;\n                if (widgetItem.layout && widgetItem.layout.isDraggable !== void 0) {\n                    draggable = widgetItem.layout.isDraggable;\n                }\n                const layout = this.getWidgetLayout(widgetItem.id) || widgetItem.layout;\n                if (widgetItem.lazy) {\n                    return (<div key={widgetItem.id} className={cls('seid-grid-item')} data-grid={layout}>\n            <Panel key={`portal-${widgetItem.id}`} panelKey={widgetItem.id} closable={closable} title={widgetItem.title} autoHideToolbar={autoHideToolbar} onClose={onClose} showDrag={draggable} isPortal>\n              <Suspense fallback={<ListLoader />}>{widgetItem.widget}</Suspense>\n            </Panel>\n          </div>);\n                }\n                return (<div key={widgetItem.id} className={cls('seid-grid-item')} data-grid={layout}>\n          <Panel key={`portal-${widgetItem.id}`} panelKey={widgetItem.id} closable={closable} title={widgetItem.title} autoHideToolbar={autoHideToolbar} onClose={onClose} showDrag={draggable} isPortal>\n            {widgetItem.widget}\n          </Panel>\n        </div>);\n            });\n        };\n        this.renderPortal = () => {\n            const _a = this.props, { className, style } = _a, rest = __rest(_a, [\"className\", \"style\"]);\n            const { layouts } = this.state;\n            const gridLayoutProps = omit(rest, ['storageKey', 'widgets', 'autoHideToolbar', 'layouts']);\n            return (<div className={cls('seid-portal-panel', className)} style={style}>\n        <ResponsiveGridLayout className=\"layout\" layouts={layouts} {...gridLayoutProps} onBreakpointChange={this.onBreakpointChange} onLayoutChange={this.onLayoutChange}>\n          {this.renderGridItem()}\n        </ResponsiveGridLayout>\n      </div>);\n        };\n        const { widgets, layouts } = props;\n        this.state = {\n            layouts: layouts || {},\n            widgets,\n            breakpoint: 'lg',\n            cols: 12,\n        };\n    }\n    componentDidUpdate(_preProps, preState) {\n        if (!isEqual(preState.widgets, this.props.widgets)) {\n            const { widgets } = this.props;\n            this.setState({\n                widgets,\n            });\n        }\n    }\n    render() {\n        return (<LocaleReceiver defaultLocale={defaultLocale} componentName=\"PortalPanel\">\n        {this.renderPortal}\n      </LocaleReceiver>);\n    }\n}\nIndex.defaultProps = {\n    autoHideToolbar: false,\n    breakpoints: { lg: 1200, md: 996, sm: 768, xs: 480, xxs: 0 },\n    cols: { lg: 12, md: 10, sm: 6, xs: 4, xxs: 2 },\n    rowHeight: 200,\n    widgets: [],\n    compactType: 'horizontal',\n    draggableHandle: '.seid-drag-handler',\n    isDraggable: true,\n    isResizable: true,\n};\nIndex.propTypes = {\n    closable: PropTypes.bool,\n    title: PropTypes.string,\n    className: PropTypes.string,\n    compactType: PropTypes.oneOf(['vertical', 'horizontal']),\n    draggableHandle: PropTypes.string,\n};\nexport default Index;\n"],"file":"index.js"}