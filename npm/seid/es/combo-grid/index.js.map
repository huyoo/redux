{"version":3,"sources":["combo-grid/index.jsx"],"names":["React","Component","ReactDOM","PropTypes","cls","isEqual","PerfectScrollbar","Select","Input","Table","LocaleReceiver","formatMsg","objectAssignAppend","request","setCursorPosition","defaultLocale","Search","ComboGrid","props","loaded","data","quickSearchValue","onResize","dataTable","height","tDom","findDOMNode","HTMLElement","antTableBody","querySelector","style","maxHeight","scrollBar","destroy","update","hideComboGrid","e","comboGrid","contains","target","setState","showGrid","showComboGrid","store","getData","window","setTimeout","getReaderData","obj","reader","getReader","readerField","s","split","d","i","length","Array","cascadeParams","remotePaging","searchProperties","pagination","state","params","superParams","quickSearchProperties","pageInfo","page","current","rows","pageSize","loadData","afterLoaded","url","type","methodType","loading","method","then","res","success","resultData","ds","gridData","total","records","slice","Function","onPageChange","newData","getLocalFilterData","afterSelect","item","index","form","name","field","value","formData","getFieldsValue","forEach","f","idx","setFieldsValue","onClearValue","afterClear","undefined","searchValue","filter","fund","fieldValue","toLowerCase","indexOf","trim","onSearchChange","focus","searchInput","input","onSearch","initComboGrid","ref","width","parentNode","onRowEventChange","record","onClick","getRowKey","rowKey","key","Error","showTotal","locale","getTableWidth","columns","w","col","select","clientWidth","renderComboGrid","allowClear","disabled","showSearch","searchPlaceHolder","placeholder","className","selectRestProps","ele","node","wordBreak","x","y","size","onChange","defaultValue","dataSource","defaultV","document","addEventListener","autoLoad","removeEventListener","prevProps","defaultProps","showPaging","propTypes","object","bool","any","classNames","string","shape","oneOf","array","isRequired","number","func"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport cls from 'classnames';\nimport isEqual from 'react-fast-compare';\nimport PerfectScrollbar from 'perfect-scrollbar';\nimport Select from 'antd/es/select';\nimport Input from 'antd/es/input';\nimport Table from 'antd/es/table';\nimport LocaleReceiver from '../seid-locale-receiver';\nimport { formatMsg, objectAssignAppend, request, setCursorPosition } from '../utils';\nimport defaultLocale from './locale';\nconst { Search } = Input;\nclass ComboGrid extends Component {\n    constructor(props) {\n        super(props);\n        this.loaded = false;\n        this.data = [];\n        this.quickSearchValue = \"\";\n        this.onResize = () => {\n            if (this.dataTable) {\n                const { height } = this.props;\n                const tDom = ReactDOM.findDOMNode(this.dataTable);\n                if (tDom && tDom instanceof HTMLElement) {\n                    const antTableBody = tDom.querySelector('.ant-table-body');\n                    if (antTableBody && antTableBody instanceof HTMLElement) {\n                        antTableBody.style.maxHeight = `${height}px`;\n                        if (this.scrollBar) {\n                            this.scrollBar.destroy();\n                            this.scrollBar = null;\n                        }\n                        this.scrollBar = new PerfectScrollbar(antTableBody);\n                        this.scrollBar.update();\n                    }\n                }\n            }\n        };\n        this.hideComboGrid = (e) => {\n            if (this.comboGrid && !this.comboGrid.contains(e.target)) {\n                this.setState({ showGrid: false });\n            }\n        };\n        this.showComboGrid = (showGrid) => {\n            if (showGrid) {\n                const { store } = this.props;\n                if (store) {\n                    this.getData();\n                }\n                this.setState({ showGrid }, () => {\n                    window.setTimeout(this.onResize, 200);\n                });\n            }\n        };\n        this.getReaderData = (obj) => {\n            const { reader } = this.props;\n            let data = [];\n            if (reader.data) {\n                data = this.getReader(reader.data, obj) || [];\n            }\n            return data;\n        };\n        this.getReader = (readerField, obj) => {\n            let data = null;\n            if (typeof obj === 'object' && readerField) {\n                const s = readerField.split('.');\n                let d = obj[s[0]];\n                for (let i = 1; i < s.length; i++) {\n                    d = d[s[i]];\n                    if (d instanceof Array && d.length > 0 && i < s.length - 1) {\n                        d = d[0];\n                    }\n                }\n                if (d) {\n                    data = d;\n                }\n            }\n            return data;\n        };\n        this.getData = () => {\n            const { cascadeParams, store, remotePaging, searchProperties } = this.props;\n            const { pagination } = this.state;\n            const { params } = store || {};\n            const superParams = Object.assign({}, (params || {}));\n            if (remotePaging) {\n                objectAssignAppend(superParams, {\n                    quickSearchValue: this.quickSearchValue,\n                    quickSearchProperties: searchProperties,\n                    pageInfo: {\n                        page: pagination.current,\n                        rows: pagination.pageSize,\n                    },\n                });\n            }\n            if (cascadeParams) {\n                this.loaded = false;\n                objectAssignAppend(superParams, cascadeParams);\n            }\n            if (!this.loaded) {\n                this.loadData(superParams);\n            }\n        };\n        this.loadData = (params) => {\n            const { store, afterLoaded, remotePaging, reader } = this.props;\n            const { pagination } = this.state;\n            const { url, type } = store || {};\n            const methodType = type || 'get';\n            this.setState({ loading: true });\n            if (url) {\n                request({\n                    method: methodType,\n                    url,\n                    data: params,\n                })\n                    .then((res) => {\n                    if (res.success) {\n                        const resultData = res.data || [];\n                        let ds = [];\n                        if (reader && reader.data) {\n                            ds = this.getReaderData(resultData);\n                        }\n                        else if (resultData instanceof Array) {\n                            ds = resultData;\n                        }\n                        else if (resultData.rows instanceof Array) {\n                            ds = resultData.rows;\n                        }\n                        if (remotePaging) {\n                            this.setState({\n                                gridData: ds,\n                                pagination: Object.assign(Object.assign({}, pagination), { total: resultData.records }),\n                            });\n                        }\n                        else {\n                            const { current, pageSize } = pagination;\n                            this.data = ds;\n                            const gridData = this.data.slice((current - 1) * pageSize, current * pageSize);\n                            this.setState({\n                                gridData,\n                                pagination: Object.assign(Object.assign({}, pagination), { total: ds.length }),\n                            });\n                        }\n                        if (afterLoaded && afterLoaded instanceof Function) {\n                            afterLoaded(ds);\n                        }\n                    }\n                })\n                    .finally(() => {\n                    this.loaded = true;\n                    this.setState({ loading: false }, this.onResize);\n                });\n            }\n        };\n        this.onPageChange = (current, pageSize) => {\n            const { pagination } = this.state;\n            const { remotePaging } = this.props;\n            this.setState({\n                pagination: Object.assign(Object.assign({}, pagination), { current,\n                    pageSize }),\n            }, () => {\n                if (remotePaging) {\n                    this.loaded = false;\n                    this.getData();\n                }\n                else {\n                    const newData = this.getLocalFilterData();\n                    const gridData = newData.slice((current - 1) * pageSize, current * pageSize);\n                    this.setState({\n                        gridData,\n                    });\n                }\n            });\n        };\n        this.afterSelect = (item, index) => {\n            const { afterSelect, reader, form, name, field = [] } = this.props;\n            this.setState({\n                showGrid: false,\n                value: this.getReader(reader.name, item),\n            }, () => {\n                const data = { [name]: this.getReader(reader.name, item) };\n                const formData = form ? form.getFieldsValue() : {};\n                if (reader && reader.field && field.length > 0 && field.length === reader.field.length) {\n                    field.forEach((f, idx) => {\n                        data[f] = this.getReader(reader.field ? reader.field[idx] : '', item);\n                    });\n                }\n                Object.assign(formData, data);\n                if (form) {\n                    form.setFieldsValue(formData);\n                }\n                if (afterSelect) {\n                    afterSelect(item, index);\n                }\n            });\n        };\n        this.onClearValue = () => {\n            const { afterClear, form, name, reader, field = [] } = this.props;\n            this.setState({\n                value: undefined,\n            }, () => {\n                const data = { [name]: null };\n                if (reader && reader.field && field.length === reader.field.length) {\n                    field.forEach(f => {\n                        data[f] = null;\n                    });\n                }\n                if (form) {\n                    form.setFieldsValue(data);\n                }\n                if (afterClear) {\n                    afterClear();\n                }\n            });\n        };\n        this.getLocalFilterData = () => {\n            const { searchProperties = [] } = this.props;\n            let newData = this.data;\n            const searchValue = this.quickSearchValue;\n            if (searchValue) {\n                newData = newData.filter(item => {\n                    let fund = false;\n                    for (let i = 0; i < searchProperties.length; i += 1) {\n                        const fieldValue = this.getReader(searchProperties[i], item);\n                        if (fieldValue) {\n                            fund = fieldValue.toLowerCase().indexOf(searchValue.trim().toLowerCase()) !== -1;\n                            if (fund) {\n                                break;\n                            }\n                        }\n                    }\n                    return fund;\n                });\n            }\n            return newData;\n        };\n        this.onSearchChange = (e) => {\n            this.quickSearchValue = e.target.value;\n        };\n        this.focus = () => {\n            if (this.searchInput && this.searchInput.input) {\n                setCursorPosition(this.searchInput.input.input, this.quickSearchValue.length);\n            }\n        };\n        this.onSearch = () => {\n            const { pagination } = this.state;\n            const { remotePaging } = this.props;\n            if (remotePaging) {\n                this.loaded = false;\n                this.setState({\n                    pagination: Object.assign(Object.assign({}, pagination), { current: 1 }),\n                }, () => {\n                    this.focus();\n                    this.getData();\n                });\n            }\n            else {\n                const newData = this.getLocalFilterData();\n                this.setState({\n                    pagination: Object.assign(Object.assign({}, pagination), { current: 1, total: newData.length }),\n                }, () => {\n                    const gridData = newData.slice(0, pagination.pageSize);\n                    this.setState({\n                        gridData,\n                    }, this.focus);\n                });\n            }\n        };\n        this.initComboGrid = (ref) => {\n            if (ref) {\n                const { width } = this.props;\n                this.comboGrid = ref;\n                if (width && width > 0) {\n                    ref.parentNode.style.width = `${width}px`;\n                }\n            }\n        };\n        this.onRowEventChange = (record, idx) => {\n            return {\n                onClick: () => this.afterSelect(record, idx),\n            };\n        };\n        this.getRowKey = (item) => {\n            const { rowKey } = this.props;\n            let key;\n            if (typeof rowKey === 'function') {\n                key = rowKey(item);\n            }\n            else if (typeof rowKey === 'string') {\n                key = item[rowKey];\n            }\n            else {\n                key = item.key;\n            }\n            if (!key) {\n                throw new Error('rowKey');\n            }\n            return key;\n        };\n        this.showTotal = (total, locale) => {\n            return formatMsg(locale.total, { total });\n        };\n        this.getTableWidth = () => {\n            const { columns, width = 0 } = this.props;\n            let w = 0;\n            columns.forEach(col => {\n                if (col.width && col.width > 0) {\n                    w += col.width || 0;\n                }\n            });\n            if ((w === 0 || w < width) && this.select && this.dataTable) {\n                w += width || this.select.clientWidth || 0;\n            }\n            return w;\n        };\n        this.renderComboGrid = (locale) => {\n            const { gridData, loading, pagination, value, showGrid } = this.state;\n            const { allowClear, disabled, showSearch, searchPlaceHolder, height, columns, placeholder, style = {}, className, } = this.props;\n            const selectRestProps = { style, className };\n            Object.assign(selectRestProps, { value });\n            return (<Select ref={ele => (this.select = ele)} placeholder={placeholder} onDropdownVisibleChange={this.showComboGrid} open={showGrid} allowClear={allowClear} onChange={this.onClearValue} disabled={disabled} {...selectRestProps} dropdownRender={() => (<div className={cls('seid-combo-grid')} ref={ref => this.initComboGrid(ref)}>\n            {showSearch ? (<div className=\"action-bar\">\n                <Search ref={node => (this.searchInput = node)} placeholder={searchPlaceHolder} onChange={this.onSearchChange} onSearch={this.onSearch} onPressEnter={this.onSearch}/>\n              </div>) : null}\n            <Table style={{ wordBreak: 'break-word' }} loading={loading} rowKey={record => this.getRowKey(record)} ref={node => (this.dataTable = node)} columns={columns} dataSource={gridData} scroll={{ x: this.getTableWidth(), y: height }} size=\"middle\" onRow={(record, index) => this.onRowEventChange(record, index)} pagination={{\n                current: pagination.current,\n                pageSize: pagination.pageSize,\n                total: pagination.total,\n                size: 'small',\n                onChange: this.onPageChange,\n                showTotal: (total) => this.showTotal(total, locale),\n            }}/>\n          </div>)}/>);\n        };\n        const { defaultValue, value, dataSource = [] } = props;\n        const defaultV = value || defaultValue || undefined;\n        this.loaded = false;\n        this.data = [...dataSource];\n        this.state = {\n            value: defaultV,\n            loading: false,\n            showGrid: false,\n            gridData: dataSource,\n            pagination: {\n                current: 1,\n                pageSize: 15,\n                total: dataSource.length || 0,\n            },\n        };\n    }\n    componentDidMount() {\n        document.addEventListener('mousedown', this.hideComboGrid, false);\n        const { store } = this.props;\n        if (store && store.autoLoad === true) {\n            this.getData();\n        }\n    }\n    componentWillUnmount() {\n        document.removeEventListener('mousedown', this.hideComboGrid);\n    }\n    componentDidUpdate(prevProps) {\n        if (!isEqual(prevProps.cascadeParams, this.props.cascadeParams) ||\n            !isEqual(prevProps.value, this.props.value)) {\n            const { defaultValue, value } = this.props;\n            const defaultV = value || defaultValue || undefined;\n            this.setState({\n                value: defaultV,\n            });\n        }\n    }\n    render() {\n        return (<LocaleReceiver defaultLocale={defaultLocale} componentName=\"ComboGrid\">\n        {this.renderComboGrid}\n      </LocaleReceiver>);\n    }\n}\nComboGrid.defaultProps = {\n    remotePaging: false,\n    showPaging: true,\n    disabled: false,\n    showSearch: true,\n    store: null,\n    dataSource: [],\n    columns: [],\n    height: 250,\n    allowClear: false,\n    placeholder: '',\n    searchPlaceHolder: '',\n    searchProperties: ['code', 'name'],\n    rowKey: 'id',\n    name: '',\n    field: [],\n};\nComboGrid.propTypes = {\n    cascadeParams: PropTypes.object,\n    disabled: PropTypes.bool,\n    value: PropTypes.any,\n    defaultValue: PropTypes.any,\n    allowClear: PropTypes.bool,\n    classNames: PropTypes.string,\n    placeholder: PropTypes.string,\n    store: PropTypes.shape({\n        type: PropTypes.oneOf(['GET', 'POST']),\n        url: PropTypes.string,\n        params: PropTypes.object,\n        autoLoad: PropTypes.bool,\n    }),\n    reader: PropTypes.shape({\n        data: PropTypes.string,\n        name: PropTypes.string,\n        field: PropTypes.array,\n    }).isRequired,\n    remotePaging: PropTypes.bool,\n    showPaging: PropTypes.bool,\n    showSearch: PropTypes.bool,\n    width: PropTypes.number,\n    searchPlaceHolder: PropTypes.string,\n    searchProperties: PropTypes.array,\n    dataSource: PropTypes.array,\n    afterLoaded: PropTypes.func,\n    afterSelect: PropTypes.func,\n    afterClear: PropTypes.func,\n    rowKey: PropTypes.string,\n    name: PropTypes.string.isRequired,\n    field: PropTypes.array,\n};\nexport default ComboGrid;\n"],"file":"index.js"}