{"version":3,"sources":["year-picker/index.jsx"],"names":["React","PropTypes","DatePicker","cls","moment","YearPicker","props","validValue","v","toString","length","isNaN","Number","undefined","triggerChange","yearValue","onChange","yv","parseInt","changeRender","format","setState","open","value","clearValue","setOpenState","state","defaultValue","defaultV","style","allowClear","placeholder","className","disabled","nextProps","Component","defaultProps","propTypes","bool","oneOfType","string","number","func"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport PropTypes from 'prop-types';\nimport DatePicker from 'antd/es/date-picker';\nimport cls from 'classnames';\nimport moment from 'moment';\nclass YearPicker extends React.Component {\n    constructor(props) {\n        super(props);\n        this.validValue = (v) => {\n            if (v && v.toString().length === 4 && !isNaN(Number(v))) {\n                return moment(v.toString());\n            }\n            return undefined;\n        };\n        this.triggerChange = (yearValue) => {\n            const { onChange } = this.props;\n            if (onChange) {\n                let yv;\n                if (yearValue) {\n                    yv = parseInt(yearValue.toString(), 10);\n                    if (isNaN(yv)) {\n                        yv = undefined;\n                    }\n                }\n                onChange(yv);\n            }\n        };\n        this.changeRender = (v) => {\n            const { format } = this.props;\n            this.setState({ open: false, value: v }, () => this.triggerChange(moment(v).format(format)));\n        };\n        this.clearValue = () => {\n            this.setState({\n                value: undefined,\n            }, () => {\n                this.triggerChange(undefined);\n            });\n        };\n        this.setOpenState = () => {\n            const { open } = this.state;\n            this.setState({\n                open: !open,\n            });\n        };\n        const { defaultValue, value } = props;\n        const defaultV = value || defaultValue;\n        this.state = {\n            value: this.validValue(defaultV),\n            open: false,\n        };\n    }\n    static getDerivedStateFromProps(nextProps) {\n        if (nextProps.value) {\n            return nextProps.value;\n        }\n        return null;\n    }\n    render() {\n        const { open, value } = this.state;\n        const { style, allowClear, placeholder, className, format, disabled } = this.props;\n        return (<DatePicker disabled={disabled} mode=\"year\" format={format} allowClear={allowClear} placeholder={placeholder} value={value} onPanelChange={this.changeRender} onOpenChange={this.setOpenState} onChange={this.clearValue} open={open} style={Object.assign({}, style)} className={cls('seid-year-picker', className)}/>);\n    }\n}\nYearPicker.defaultProps = {\n    disabled: false,\n    allowClear: false,\n    placeholder: '',\n    format: 'YYYY',\n};\nYearPicker.propTypes = {\n    disabled: PropTypes.bool,\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    defaultValue: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    allowClear: PropTypes.bool,\n    className: PropTypes.string,\n    placeholder: PropTypes.string,\n    onChange: PropTypes.func,\n};\nexport default YearPicker;\n"],"file":"index.js"}