{"version":3,"sources":["tool-bar/index.jsx"],"names":["React","Component","ReactDOM","Row","Col","Button","Popover","debounce","cls","ExtIcon","ToolBar","props","leftWidth","rightWidth","state","showLeft","showRight","calcDom","newState","leftNode","rightNode","leftElement","findDOMNode","leftCol","HTMLElement","offsetWidth","clientWidth","rightElement","rightCol","setState","getLayout","layout","leftSpan","rightSpan","getLeftComponent","left","getRightComponent","right","window","addEventListener","removeEventListener","rowStyle","rowClassName","rightClassName","rightStyle","leftClassName","leftStyle","node","display","whiteSpace","defaultProps","margin"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport Row from 'antd/es/row';\nimport Col from 'antd/es/col';\nimport Button from 'antd/es/button';\nimport Popover from 'antd/es/popover';\nimport debounce from 'lodash/debounce';\nimport cls from 'classnames';\nimport ExtIcon from '../ext-icon';\n/**\n * 工具栏,监听宽度改变展示效果\n */\nclass ToolBar extends Component {\n    constructor(props) {\n        super(props);\n        this.leftWidth = 0;\n        this.rightWidth = 0;\n        this.state = {\n            showLeft: true,\n            showRight: true,\n        };\n        this.calcDom = () => {\n            const newState = {};\n            const { showLeft, showRight } = this.state;\n            const { leftNode, rightNode } = this;\n            const leftElement = ReactDOM.findDOMNode(this.leftCol);\n            if (leftElement && leftElement instanceof HTMLElement && leftNode) {\n                if (showLeft && this.leftWidth !== leftNode.offsetWidth) {\n                    this.leftWidth = leftNode.offsetWidth;\n                    newState.showLeft = leftNode.offsetWidth <= leftElement.clientWidth;\n                }\n                else {\n                    newState.showLeft = this.leftWidth <= leftElement.clientWidth;\n                }\n            }\n            const rightElement = ReactDOM.findDOMNode(this.rightCol);\n            if (rightElement && rightElement instanceof HTMLElement && rightNode) {\n                if (showRight && this.rightWidth !== rightNode.offsetWidth) {\n                    this.rightWidth = rightNode.offsetWidth;\n                    newState.showRight = rightNode.offsetWidth <= rightElement.clientWidth;\n                }\n                else {\n                    newState.showRight = this.rightWidth <= rightElement.clientWidth;\n                }\n            }\n            this.setState(newState);\n        };\n        this.getLayout = () => {\n            const { layout = {} } = this.props;\n            const { leftSpan = 12, rightSpan = 12 } = layout;\n            return {\n                leftSpan,\n                rightSpan,\n            };\n        };\n        this.getLeftComponent = () => {\n            const { left } = this.props;\n            return <>{left}</>;\n        };\n        this.getRightComponent = () => {\n            const { right } = this.props;\n            return <>{right}</>;\n        };\n        this.calcDom = debounce(this.calcDom, 500);\n    }\n    componentDidMount() {\n        window.addEventListener('resize', this.calcDom);\n        this.calcDom();\n    }\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.calcDom);\n    }\n    render() {\n        const { rowStyle, rowClassName, rightClassName, rightStyle, leftClassName, leftStyle, left, right, } = this.props;\n        const { showLeft, showRight } = this.state;\n        const { leftSpan, rightSpan } = this.getLayout();\n        if (!left && !right)\n            return null;\n        return (<Row style={rowStyle} className={cls(rowClassName, 'seid-tool-bar')} type=\"flex\" justify=\"space-between\" align=\"middle\">\n        <Col ref={node => {\n            this.leftCol = node;\n        }} className={leftClassName} style={leftStyle} span={leftSpan}>\n          <div style={{\n            display: showLeft ? 'inline' : 'none',\n            whiteSpace: 'nowrap',\n        }} ref={node => {\n            this.leftNode = node;\n        }}>\n            {this.getLeftComponent()}\n          </div>\n          {!showLeft && (<Popover placement=\"bottomRight\" content={this.getLeftComponent()}>\n              <Button style={{ float: 'left' }}>\n                <ExtIcon type=\"vertical-left\" antd/>\n              </Button>\n            </Popover>)}\n        </Col>\n        <Col ref={node => {\n            this.rightCol = node;\n        }} className={rightClassName} style={rightStyle} span={rightSpan}>\n          <div style={{\n            display: showRight ? 'inline' : 'none',\n            whiteSpace: 'nowrap',\n        }} ref={node => {\n            this.rightNode = node;\n        }}>\n            {this.getRightComponent()}\n          </div>\n          {!showRight && (<Popover placement=\"bottomLeft\" content={this.getRightComponent()}>\n              <Button style={{ float: 'right' }}>\n                <ExtIcon type=\"vertical-right\" antd/>\n              </Button>\n            </Popover>)}\n        </Col>\n      </Row>);\n    }\n}\nToolBar.defaultProps = {\n    layout: {\n        leftSpan: 12,\n        rightSpan: 12,\n    },\n    left: null,\n    right: null,\n    rowStyle: { margin: '13px 0' },\n};\nexport default ToolBar;\n"],"file":"index.js"}